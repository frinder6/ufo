<!DOCTYPE html>
<html>
<head>

    <title>Content</title>
    <link rel="stylesheet" type="text/css" media="screen" href="w2ui/w2ui.css" id="mainCSS"/>
    <link rel="stylesheet" type="text/css" media="screen" href="w2ui/libs/font-awesome/font-awesome.css"/>
    <link href="page/pagination.css" rel="stylesheet"/>
    <link href="layer/skin/layer.css" rel="stylesheet"/>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #layout {
            width: 100%;
            height: 100%;
        }

        #grid {
            width: 100%;
            height: 100%;
        }

        #paging {
            position: absolute;
            left: 3px;
        }
    </style>

</head>
<body>
<div id="layout">
</div>
</body>
<script type="text/javascript" src="js/jquery-3.1.1.js"></script>
<script type="text/javascript" src="w2ui/w2utils.js"></script>
<script type="text/javascript" src="w2ui/w2grid.js"></script>
<script type="text/javascript" src="w2ui/w2layout.js"></script>
<script type="text/javascript" src="w2ui/w2popup.js"></script>
<script type="text/javascript" src="w2ui/w2tabs.js"></script>
<script type="text/javascript" src="w2ui/w2toolbar.js"></script>
<script type="text/javascript" src="w2ui/w2sidebar.js"></script>
<script type="text/javascript" src="w2ui/w2fields.js"></script>
<script type="text/javascript" src="w2ui/w2form.js"></script>
<script type="text/javascript" src="page/prettify.min.js"></script>
<script type="text/javascript" src="page/pagination.js"></script>
<script type="text/javascript" src="layer/layer.js"></script>

<script type="text/javascript">
    $(function () {
        w2utils.locale('w2ui/locale/zh-cn.json');
        $('#layout').w2layout({
            name: 'layout',
            padding: 1,
            panels: [
                {type: 'main', content: '<div id="grid"></div>'}
            ]
        });
        $('#grid').w2grid({
            name: 'grid',
            url: 'menu/page.menu',
            header: '导航信息数据',
            multiSearch: true,
            recid: 'id',
            show: {
                header: true,
                toolbar: true,
                footer: true,
                selectColumn: true,
                skipRecords: false,
                lineNumbers: false,
                saveRestoreState: false,
                toolbarAdd: true,
                toolbarDelete: true,
                toolbarSave: true
            },
            columns: [
                {field: 'title', caption: '名称', size: '200px', sortable: true},
                {field: 'status', caption: '状态', size: '50px', sortable: true},
                {field: 'createTime', caption: '创建时间', size: '200px'},
                {field: 'updateTime', caption: '更新时间', size: '200px'},
            ],
            searches: [
                {type: 'text', field: 'title', caption: '名称'},
                {
                    type: 'list', field: 'status', caption: '状态',
                    options: {items: [{id: 1, text: '可用'}, {id: 0, text: '禁用'}]}
                }
            ],
            onRequest: function (event) {
                console.log(event);
                var postData = event.postData;
                if (postData) {
                    var searchData = postData.search;
                    var searchLogic = postData.searchLogic;
                    var params = [];
                    $.each(searchData, function (i, v) {
                        if (searchLogic == 'OR' && v.type == 'text') {
                            params.push(v.field + '=' + v.value)
                        }
                        if (searchLogic == 'AND') {
                            params.push(v.field + '=' + v.value)
                        }
                    });
                    var t = new Date().getMilliseconds();
                    if (params.length > 0){
                        event.url = event.url + '?t=' + t + '&' + params.join('&');
                    }
                }
            }
        });
    });
</script>


</html>